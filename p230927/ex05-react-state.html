<!DOCTYPE html>
<html lang="ko">

<head>
  <title>ìƒí’ˆ 1í˜ì´ì§€</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      text-align: center;
    }

    form {
      margin-bottom: 20px;
    }

    .main-card button {
      position: relative;
      bottom: 15px;
      left: -45px;
    }

    .favorites {
      list-style: none;
      display: flex;
      gap: 15px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .favorites img {
      width: 150px;
    }
  </style>
</head>

<body>
  <div id="food-li-insert"></div>

  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

  <script type="text/babel">
    function Title(props) {
      return <h1>{props.children}</h1>;
    }

    // í™”ì‚´í‘œ í•¨ìˆ˜ë¡œ ìƒëµê°€ëŠ¥í•œ ê²ƒë“¤ ìƒëµ
    // const Form = () => (
    //     <form action="">
    //       <input type="text" name="name" placeholder="ìƒí’ˆëª…ì„ ì…ë ¥í•˜ì„¸ìš”" />
    //       <button type="submit">ì¶”ê°€</button>
    //     </form>
    //   );

    // component
    const Form = function ({ handlerFormSubmit }) {
      // [ìƒíƒœ ì¶”ê°€] -----------------------------------
      // Data ê´€ë¦¬(State) - ë³€ìˆ˜: ê°’ ì €ì¥, í•¨ìˆ˜: ê¸°ëŠ¥
      // React.useState(ì´ˆê¸°ê°’);
      // cf) React.useState('ì´ˆê¸°ê°’ ë¬¸ìì—´ ì§€ì •');
      // ì´ˆê¸°ê°’ : number, string ê°€ëŠ¥ // useState return = ë°°ì—´[ì´ˆê¸°ê°’, ìµëª…í•¨ìˆ˜]

      // const counterState = React.useState(1); //ìƒíƒœë¥¼ ì´ˆê¸°í™”ì‹œì¼œì£¼ëŠ” ë©”ì†Œë“œ (ì´ˆê¸°ê°’)ì„ ë„£ì–´ì¤Œ
      // const counter = counterState[0]; // ì´ˆê¸°ê°’
      // const setCounter = counterState[1]; // setState ìµëª…í•¨ìˆ˜ / setStateëŠ” ê¼­ ë³€ìˆ˜ ì´ë¦„ì€ set + ì´ˆê¸°ê°’ ë³€ìˆ˜ ì´ë¦„

      // êµ¬ì¡° ë¶„í•´ í• ë‹¹
      // const [counter, setCounter] = React.useState(1); // êµ¬ì¡°ë¶„í•´í• ë‹¹ì„ í•˜ë©´ ìœ„ì˜ ì½”ë“œë¥¼ í•œì¤„ë¡œ ë°”ê¿€ ìˆ˜ ìˆìŒ
      // console.log('[í•¸ë“¤ëŸ¬ ë°–] counter : ', counter);

      // function handlerFormSubmit(event) {
      //   event.preventDefault();
      //   console.log('ì¶”ê°€ ë²„íŠ¼ í´ë¦­í•¨!!!');

      //   // [ìƒíƒœê°’ ì„¤ì •] --------------------------------
      //   // setCounter('ìƒíƒœê°’ ë³€ê²½!');
      //   setCounter(counter + 1); // dataë¥¼ ê´€ë¦¬í•˜ê³ ì í•˜ëŠ” ë‚´ìš©ì„ ìµëª…í•¨ìˆ˜ë¥¼ ì´ìš©í•´ì„œ ë³€ê²½í•´ì¤Œ
      //   //ì‚¬ìš©ìê°€ ì–´ë– í•œ ì‘ì—…ì„ í•´ì•¼ ìƒíƒœê°’ ì„¤ì •ì´ ê°€ëŠ¥(í•¨ìˆ˜ ì•ˆì— ë„£ì–´ì•¼í•¨)

      //   // [ìƒíƒœê°’ í™•ì¸] --------------------------------
      //   // console.log('counterState', counterState);
      //   console.log('counter : ', counter); //ë°”ë€Œê¸° ì „ì˜ ê°’ì„ ì¶œë ¥, ê°’ì„ ë¨¼ì €ì“°ê³  ë‚˜ì¤‘ì— setCounterì‹¤í–‰ë˜ì„œ ë³€ê²½(ê·¸ê²Œ useStateì˜ ê¸°ëŠ¥)
      //   // console.log('setCounter : ', setCounter);
      // }
      return (
        <form action="" onSubmit={handlerFormSubmit}>
          <input type="text" name="name" placeholder="ìƒí’ˆëª…ì„ ì…ë ¥í•˜ì„¸ìš”" />
          <button type="submit">ì¶”ê°€</button>
        </form>
      );
    };

    const MainCard = ({ src, handlerIconClick }) => {
      // function iconClick() {
      //   console.log('ì´ëª¨ì§€ í´ë¦­!!');
      // }

      // reactì—ì„œ ì‚¬ìš©í• ë•ŒëŠ” classì˜ ì˜ë¯¸ê°€ ì¤‘ë³µë˜ì–´ì„œ classNameìœ¼ë¡œ ì¨ì¤˜ì•¼í•¨
      return (
        <div className="main-card">
          <img
            src={src}
            alt="ì˜¬ë¦¬ë¸Œ ì˜¤ì¼"
            width="400"
            style={{ border: "1px solid green" }}
          />
          <button onClick={handlerIconClick}>ğŸ…</button>
        </div>
      );
    }

    const FoodItem = ({ src }) => {
      return (
        <li>
          <img
            src={src}
            alt="ìŒì‹"
            style={{
              width: "150px",
              height: "100px",
              backgroundSize: "contain"
            }}
          />
        </li>
      );
    };

    const Favorites = ({ favorites }) => {
      // const foodOne = 'img/food-one.jpg';
      // const foodTwo = 'img/food-two.jpg';
      // const foodThree = 'img/food-three.jpg';
      // const foods = [foodOne, foodTwo, foodThree];
      const time = Date.now();

      //ë°°ì—´.map(callbackí•¨ìˆ˜) => ë°°ì—´ì„ í•˜ë‚˜ì”© ìˆœíšŒ
      return (
        <ul className="favorites">
          {/* <FoodItem src="img/food-one.jpg" /> */}
          {/* <FoodItem src="img/food-two.jpg" /> */}
          {/* <FoodItem src="img/food-three.jpg" /> */}
          {/* foods.map(item => <FoodItem src={item} key={item}/>) */}
          {favorites.map((item, time) => <FoodItem src={item} key={time} />)}
          {/* <FoodItem src={favorites} /> */}
        </ul>
      );
      //êµ¬ë¶„í•  ìˆ˜ ìˆëŠ” í‚¤ë¥¼ ë„£ìœ¼ë¼ê³  ê²½ê³ ê°€ ë– ì„œ ë…ìì ì¸ í‚¤ë¥¼ ë„£ì–´ì¤Œ.
    };
    // 2ê°œì˜ ë¦¬ì•¡íŠ¸ ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ ë Œë”ë§í•˜ê³ ì í•  ë•Œ 
    // ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ ì»´í¬ë„ŒíŠ¸ë¡œ ë³€ê²½
    const App = () => {
      // [ìƒíƒœ] -----------------------------------------
      const foodOne = 'img/food-one.jpg';
      const foodTwo = 'img/food-two.jpg';
      const foodThree = 'img/food-three.jpg';
      const [mainFood, setMainFood] = React.useState(foodOne);
      const [favorites, setFavorites] = React.useState([foodOne, foodTwo]);
      // mapì„ ì“°ê¸° ìœ„í•´ì„œ ë¬¸ìì—´ì¸ foodOneì„ ë°°ì—´ë¡œ ë³€ê²½
      const food = favorites[0];

      // [ìƒíƒœ ëŒì–´ì˜¬ë¦¬ê¸° : lifting state up] 
      // ìì‹ componentì˜ ìƒíƒœë¥¼ ë¶€ëª¨ë¡œ ëŒì–´ì˜¬ë¦¼
      const [counter, setCounter] = React.useState(1);

      // [handler] ---------------------------------------
      function handlerFormSubmit(event) {
        event.preventDefault();
        console.log('ì¶”ê°€ ë²„íŠ¼ í´ë¦­í•¨!!!');

        // [ìƒíƒœê°’ ì„¤ì •] --------------------------------
        setCounter(counter + 1);
        console.log('counter : ', counter);
        setMainFood(foodTwo);
        console.log('mainFood : ', mainFood);
      }
      function handlerIconClick() {
        console.log('ì´ëª¨ì§€ í´ë¦­!!');
        setFavorites([...favorites, foodThree]);
        //ë°°ì—´ì˜ ìš”ì†Œë¥¼ í¼ì³ì„œ ë„£ì–´ì¤˜ì•¼í•¨! ê·¸ë˜ì„œ ì „ê°œêµ¬ë¬¸ ì‚¬ìš©!
      }

      return (
        <div>
          <Title>í˜ì´ì§€ {counter}</Title>
          <Form handlerFormSubmit={handlerFormSubmit} />
          <MainCard src={mainFood} handlerIconClick={handlerIconClick} />
          <Favorites favorites={favorites} />
        </div>
      );
    };

    // ë¦¬ì•¡íŠ¸ ì—˜ë¦¬ë¨¼íŠ¸ê°€ ì¶”ê°€ë  ìœ„ì¹˜
    const foodListInsert = document.getElementById('food-li-insert');

    // ë¦¬ì•¡íŠ¸ë¥¼ ì´ìš©í•˜ì—¬ ì—˜ë¦¬ë¨¼íŠ¸ ì¶”ê°€
    // ReactDOM.createRoot(foodListInsert).render(app);
    ReactDOM.createRoot(foodListInsert).render(<App />);
  </script>
</body>

</html>